# OSDA (Operating System Deployment Automation)

Contains 2 sources:
-- OSDA_BETA_3.0.4: source code of OSDA
-- osda-ansible: ansible playbooks to call OSDA API and provision server and install OS

## Install on CentOS 7.8

```bash
# Install the prerequisite
yum update -y
yum install -y mkisofs xorriso kpartx python3-setuptools httpd python3 python3-pip lsof
pip3 install hpOneView
pip3 install hpeOneView==5.5.0 (optional)

# open the port on the firewall
firewall-cmd --list-all
firewall-cmd --add-port=5000/tcp --permanent
firewall-cmd --add-port=80/tcp --permanent

# Install OSDA
cd src/OSDA_BETA_3.0.4
./update_osda.sh
it does
> python3 setup.py install
> systemctl daemon-reload
> systemctl restart osda
> systemctl status osda

chmod 755 configureWeb.sh
./configureWeb.sh

lsof -i :5000
lsof -i :80

```

## Tips

```bash
# to mount a img generated by OSDA
fdisk -lu /tmp/1.img
mount -t auto -o loop,offset=$((2048*512)) /tmp/1.img /mnt/img/

```
